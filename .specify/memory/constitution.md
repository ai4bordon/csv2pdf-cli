<!--
Отчет о синхронизации
- Версия: N/A → 1.0.0
- Измененные принципы: базовый набор сформирован впервые
- Добавленные разделы: Основные принципы, Технологические ограничения, Процесс разработки и качество, Управление
- Удаленные разделы: нет
- Шаблоны: ✅ .specify/templates/plan-template.md, ✅ .specify/templates/spec-template.md, ✅ .specify/templates/tasks-template.md
- Отложенные TODO: нет
-->

# Конституция проекта: CLI PDF Generator

## Основные принципы

### I. Минималистичный CLI
Команда запускает всю цепочку: чтение CSV → подстановка в HTML → рендер PDF → сохранение в `output/` → опциональное открытие файла. Дефолтные пути (`data/input.csv`, `templates/template.html`, `output/`) обязаны работать без флагов, если файлы есть.

### II. Надежность данных CSV
CSV читается стандартной `csv` с поддержкой запятой и точки с запятой как разделителей. Проверяем наличие колонок `product`, `price`, `qty`, пустой файл и отсутствующий путь. Сообщения об ошибках человеко-понятные; расширение схемы (дополнительные поля) не ломает базовый сценарий.

### III. Контроль шаблона и суммы
HTML-шаблон использует плейсхолдеры вида `{{ placeholder }}` и цикл по позициям. Сумма по всем позициям считается в Python, в шаблон передаем готовое число. По умолчанию используется `templates/template.html`; структура шаблона документируется примером.

### IV. Рендер PDF и зависимости
Рендер вынесен в отдельную функцию: загрузка шаблона → заполнение данными → конвертация в PDF → запись в `output/` с именем `check_YYYYMMDD_HHMMSS.pdf`. Используется библиотека HTML→PDF, которую легко ставить через `pip` (рекомендуем `weasyprint`); если нужен системный бинарник, выводим инструкцию по установке.

### V. UX и прозрачность
Все сообщения и документация — на русском. Ошибки выводятся без полотна трассбеков (кроме явного режима отладки). Комментарии в коде поясняют ключевые блоки. Структура проекта проста и читабельна, без лишней магии и фреймворков.

## Технологические ограничения

Python 3.10+. Все зависимости перечислены в `requirements.txt` с версиями. Только CLI-скрипт без фреймворков. Используем `venv` по умолчанию; установка через `pip install -r requirements.txt`. Директории: `main.py`, `templates/`, `data/`, `output/` (создается при генерации). Разрешены сторонние библиотеки для HTML→PDF, предпочитаем те, что ставятся `pip`-ом без сложных системных сборок.

## Процесс разработки и качество

Стартовая команда работает без аргументов при наличии дефолтных файлов, иначе выводит подсказки. CLI на `argparse` с флагами `--input/-i`, `--template/-t`, `--output-dir/-o`, `--open`. Обработка ошибок обязательна: отсутствующие пути, пустой CSV, неподдерживаемый разделитель, проблемы рендера. Комментарии и подсказки на русском, с кратким обоснованием выбора библиотеки HTML→PDF. Поведение при расширении CSV (новые поля) должно оставаться совместимым.

## Управление

Эта конституция главнее любых иных договоренностей. Поправки требуют фиксации причины, правки версий и дат, синхронизации шаблонов план/спека/таски. Версионирование по SemVer: мажор — несовместимые изменения принципов/процесса; минор — новые принципы/разделы или заметные усиления требований; патч — формулировки и уточнения без изменения смысла. Каждое ревью или генерация документа обязаны проверять соответствие принципам и технологическим ограничениям. Даты в ISO (YYYY-MM-DD).

**Version**: 1.0.0 | **Ratified**: 2025-12-01 | **Last Amended**: 2025-12-01
